# stackUpdate
Скрипт для массового обновления IOS на стеках 2960.

## Возможности

1. Копирование IOS образа на все физические устройства в стеке в корневую директорию. Есть проверка свободного места перед выполнением копирования и проверка наличия файла с таким же именем.
2. Опционально - выполнение команды boot system switch all flash:/...
3. Опционально - перезагрузка стека.

## Настройка

В файле update2960.py в main секции задайте заливаемый IOS образ. В конфиге cisco.yaml - укажите имена и адреса обновляемых устройст. Заливка на несколько стеков идет параллельно с помощью multiprocessing - параметр задается там же, где и IOS образ.

## Особенности реализации

Скрипт включает scp server на устройстве и копирует IOS образ на master в стеке. Scp server будет выключен после копирования, если скрипт его включал сам. Если scp server уже был включен - скрипт оставит его включенным. С master IOS образ последовательно копируется на всех member в стеке. Перед этим действием есть небольшая пауза, т.к. копирование сильно нагружает CPU и для успешного выполнения дальнейших команд необходимо подождать снижения нагрузки.
